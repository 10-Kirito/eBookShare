"use strict";(self["webpackChunkfrontdesk"]=self["webpackChunkfrontdesk"]||[]).push([[250],{7250:function(t,s,o){o.r(s),o.d(s,{default:function(){return h}});var e=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"header-with-background",staticStyle:{"margin-bottom":"10px"}},[s("el-row",{staticStyle:{"margin-bottom":"30px"}},[s("div",{staticStyle:{"margin-top":"50px"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"input is-rounded",staticStyle:{width:"40%","font-size":"25px"},attrs:{type:"text",placeholder:"输入关键字搜索图书"},domProps:{value:t.searchQuery},on:{input:function(s){s.target.composing||(t.searchQuery=s.target.value)}}}),s("button",{staticClass:"button is-success is-rounded",staticStyle:{"font-size":"26px","margin-left":"10px"},on:{click:t.searchBooks}},[t._v("查询")])])]),s("el-row",[s("el-col",{staticStyle:{color:"#42b983"},attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-card",{staticClass:"box-card",staticStyle:{"margin-right":"10px",height:"100%"}},[s("h1",[t._v("图书总榜单")]),t._l(t.booksDownloadList,(function(o,e){return s("el-card",{key:e,class:e%2===0?"even":"odd"},[s("el-row",{staticStyle:{cursor:"pointer"},nativeOn:{mouseenter:function(s){return t.showInfo(e)},mouseleave:function(s){return t.hideInfo(e)},click:function(s){return t.pushDetail(t.booksDownloadList[e])}}},[s("el-col",{attrs:{span:8}},[s("img",{staticClass:"book-cover",attrs:{src:o.coverimage}})]),s("el-col",{staticClass:"book-info",attrs:{span:16}},[s("div",{staticClass:"book-title"},[t._v(t._s(o.bookname))]),s("div",{staticClass:"book-download"},[t._v(t._s(o.downloads)+"次下载")]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showLeftDetails===e,expression:"showLeftDetails===index"}],staticClass:"book-details"},[s("div",{staticClass:"book-author"},[s("span",{staticClass:"book-author",attrs:{title:"找到该作者的所有书籍"},on:{click:function(s){return t.redirectToAuthorBooks(o.author)}}},[t._v(t._s(o.author))])]),s("div",{staticClass:"book-category",attrs:{title:"类别"}},[t._v(t._s(o.category))])])])],1)],1)}))],2)],1)]),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("h1",[t._v("今日推荐阅读图书：")]),t._l(t.bookDetails,(function(o,e){return s("el-card",{key:e,staticClass:"box-card",staticStyle:{"margin-bottom":"15px"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6}},[s("el-image",{staticStyle:{cursor:"pointer",height:"150px"},attrs:{src:o.coverimage,fit:"contain",lazy:""},on:{click:function(s){return t.pushDetail(t.bookDetails[e])}}})],1),s("el-col",{attrs:{span:15}},[s("el-row",{staticClass:"attriclass"},[s("el-col",{attrs:{span:23}},[s("h3",{staticStyle:{cursor:"pointer","text-decoration":"underline"},on:{click:function(s){return t.pushDetail(t.bookDetails[e])}}},[t._v(t._s(o.bookname))])]),s("el-col",{attrs:{span:1}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:o.isCollected?"取消收藏":"收藏"}},[s("i",{class:o.collectBtnClass,staticStyle:{cursor:"pointer","font-size":"25px","margin-left":"18px","margin-top":"20px"},on:{click:function(s){return t.collectBtn(e,o)}}})])],1)],1),s("el-row",{staticStyle:{"margin-left":"-40px","padding-top":"-10px"}},[s("div",{staticClass:"grid-content book-publisher",attrs:{title:"出版社"}},[t._v(t._s(o.publisher))])]),s("el-row",{staticClass:"attriclass"},[s("span",{staticClass:"book-author",attrs:{title:"找到该作者的所有书籍"},on:{click:function(s){return t.redirectToAuthorBooks(o.author)}}},[t._v(t._s(o.author))])]),s("el-row",{staticClass:"attriclass",staticStyle:{"margin-top":"40px"}},[s("el-col",{attrs:{span:12}},[s("div",{staticStyle:{color:"#8C8C8C"}},[t._v("标准书号: "+t._s(o.isbn))])]),s("el-col",{attrs:{span:8}},[s("div",{staticStyle:{color:"#8C8C8C"}},[t._v("类别："+t._s(o.category))])]),s("el-col",{attrs:{span:4}},[s("div",{staticStyle:{color:"#8C8C8C"}},[t._v("文件："+t._s(o.type))])])],1)],1)],1)],1)}))],2)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("div",{staticClass:"grid-content bg-purple"},[s("el-card",{staticClass:"box-card",staticStyle:{"margin-left":"10px",height:"100%"}},[s("h1",[t._v("图书下载榜单")]),t._l(t.todayPopularBooks,(function(o,e){return s("el-card",{key:e,class:e%2===0?"even":"odd"},[o?s("el-row",{staticStyle:{cursor:"pointer"},nativeOn:{mouseenter:function(s){return t.showInfo2(e)},mouseleave:function(s){return t.hideInfo2(e)},click:function(s){return t.pushDetail(t.todayPopularBooks[e])}}},[s("el-col",{attrs:{span:8}},[s("img",{staticClass:"book-cover",attrs:{src:o.coverimage}})]),s("el-col",{staticClass:"book-info",attrs:{span:16}},[s("div",{staticClass:"book-title"},[t._v(t._s(o.bookname))]),s("div",{staticClass:"book-download"},[t._v(t._s(o.downloads)+"次下载")]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showRightDetails===e,expression:"showRightDetails===index"}],staticClass:"book-details"},[s("div",{staticClass:"book-author"},[s("span",{staticClass:"book-author",attrs:{title:"找到该作者的所有书籍"},on:{click:function(s){return t.redirectToAuthorBooks(o.author)}}},[t._v(t._s(o.author))])]),s("div",{staticClass:"book-category",attrs:{title:"类别"}},[t._v(t._s(o.category))])])])],1):t._e()],1)}))],2)],1)])])],1)],1)])},a=[],i=(o(7658),o(1120)),l=o(6369),r={inject:["reload"],name:"Home",data(){return{user:{},flag:!0,pageTitle:"上海大学电子图书分享平台",bookDetails:[],recommendNumber:7,booksDownloadList:[],todayPopularBooks:[],searchQuery:"",showLeftDetails:-1,showRightDetails:-1}},created(){this.getUser(),this.getRecommendBooks(),this.getDowndoadTop(),this.getTotalList()},methods:{getUser(){const t=localStorage.getItem("loguserinfo")?JSON.parse(localStorage.getItem("loguserinfo")):{id:0};t&&l["default"].set(this,"user",t)},getTotalList(){this.request.get("http://124.71.166.37:9091/books/overallbooklist",{params:{userid:this.user.id}}).then((t=>{console.log(t),this.booksDownloadList=t.data,this.booksDownloadList.forEach((t=>{t.collectBtnClass="el-icon-star-off",1==t.isfavour?(t.isCollected=!0,t.collectBtnClass="el-icon-star-on"):t.isCollected=!1,1==t.islike?t.islike=!0:t.islike=!1}))}))},getDowndoadTop(){this.request.get("http://124.71.166.37:9091/books/downloadBooks",{params:{userid:this.user.id}}).then((t=>{console.log(t),this.todayPopularBooks=t.data,this.todayPopularBooks.forEach((t=>{t.collectBtnClass="el-icon-star-off",1==t.isfavour?(t.isCollected=!0,t.collectBtnClass="el-icon-star-on"):t.isCollected=!1,1==t.islike?t.islike=!0:t.islike=!1}))}))},searchBooks(){i.Z.push({path:"/searchResult",query:{params:JSON.stringify(this.searchQuery)}})},getRecommendBooks(){this.request.get("http://124.71.166.37:9091/books/random",{params:{number:this.recommendNumber,userid:this.user.id}}).then((t=>{console.log(t.data),this.bookDetails=t.data,this.bookDetails.forEach((t=>{t.collectBtnClass="el-icon-star-off",1==t.isfavour?(t.isCollected=!0,t.collectBtnClass="el-icon-star-on"):t.isCollected=!1,1==t.islike?t.islike=!0:t.islike=!1}))}))},pushDetail(t){i.Z.push({path:"/bookdetails",query:{params:JSON.stringify(t)}})},redirectToAuthorBooks(t){this.$router.push({path:"/searchResult",query:{params:JSON.stringify(t)}})},collectBtn(t,s){0!=this.user.id?(this.bookDetails[t].isCollected=!this.bookDetails[t].isCollected,this.bookDetails[t].isCollected?(this.$message({message:"收藏成功",type:"success"}),this.bookDetails[t].collectBtnClass="el-icon-star-on",this.request.get("http://124.71.166.37:9091/relationship/favourbook",{params:{bookid:s.bookid,userid:this.user.id}}).then((t=>{console.log(t)})),console.log("收藏")):(this.$message({message:"取消成功",type:"success"}),this.bookDetails[t].collectBtnClass="el-icon-star-off",this.request.get("http://124.71.166.37:9091/relationship/favourbook",{params:{bookid:s.bookid,userid:this.user.id}}).then((t=>{console.log(t)})),console.log("取消收藏")),this.$forceUpdate()):this.$message.error("请先登录")},showInfo(t){this.showLeftDetails=t},hideInfo(t){this.showLeftDetails=-1},showInfo2(t){this.showRightDetails=t},hideInfo2(t){this.showRightDetails=-1}}},c=r,n=o(3736),u=(0,n.Z)(c,e,a,!1,null,"60f482ce",null),h=u.exports}}]);
//# sourceMappingURL=250.68f807b8.js.map