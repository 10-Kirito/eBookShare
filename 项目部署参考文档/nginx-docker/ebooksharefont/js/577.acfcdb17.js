"use strict";(self["webpackChunkfrontdesk"]=self["webpackChunkfrontdesk"]||[]).push([[577],{109:function(t,e,o){o.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return t.bookInfo?e("div",{staticStyle:{width:"420px","margin-top":"20px","margin-left":"60px"},on:{click:t.goToPreview}},[e("el-tooltip",{staticStyle:{height:"370px"},attrs:{placement:"top",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("span",[t._v(t._s(t.bookInfo.bookname))]),e("div",[e("p",{staticStyle:{width:"250px"}},[t._v(t._s(t.bookInfo.description))]),e("el-button",{attrs:{type:"success"},on:{click:t.download}},[t._v("下载")])],1)]),e("el-card",{staticStyle:{height:"100%"}},[e("div",{staticStyle:{position:"relative",width:"100%",height:"100%"}},[e("img",{staticClass:"image",staticStyle:{height:"300px"},attrs:{src:t.bookInfo.coverimage}})]),e("div",{staticStyle:{"margin-top":"2px","margin-bottom":"2px"}},[t._v(" "+t._s(t.bookInfo.bookname)+" ")])])],1)],1):t._e()},n=[],r={name:"bookFromShelf",props:{bookInfo:{}},data(){return{bookDetails:{}}},created(){console.log(this.bookInfo)},methods:{goToPreview(){let t="http://124.71.166.37:9091/file/5c50f98e6850407fa82991b6e248915a.pdf";window.open(`/lib/pdfjs-3.5.141-dist/web/viewer.html?file=${t}`)},download(){console.log(this.bookInfo.url),window.open(this.bookInfo.url)}}},i=r,s=o(3736),l=(0,s.Z)(i,a,n,!1,null,"64987cac",null),c=l.exports},6577:function(t,e,o){o.r(e),o.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header-with-background",staticStyle:{width:"90%","margin-left":"5%"}},[t._l(t.rowCount,(function(o,a){return t.booksData[(o-1)*t.colCount]?e("el-row",{key:o,staticStyle:{"margin-bottom":"30px","min-width":"1200px"},attrs:{gutter:24}},t._l(t.colCount,(function(a,n){return e("el-col",{key:a,staticStyle:{width:"300px"},attrs:{span:6}},[t.dataload?e("book-from-shelf",{staticStyle:{width:"100%"},attrs:{bookInfo:t.booksData[(o-1)*t.colCount+a-1]}}):t._e()],1)})),1):t._e()})),e("el-row",{staticStyle:{"margin-top":"10px"}},[e("div",[e("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)])],2)},n=[],r=o(109),i={name:"BookShelf",components:{bookFromShelf:r.Z},data(){return{rowCount:3,colCount:4,currentPage:1,pageSize:this.rowCount*this.colCount,total:100,booksData:[],dataload:!1}},created(){this.getUser(),0!=this.user.id?this.getAllBooksData():this.$message.error("请先登录")},beforeMount(){},methods:{getUser(){const t=localStorage.getItem("loguserinfo")?JSON.parse(localStorage.getItem("loguserinfo")):{id:0};t&&(this.user=t)},handleSizeChange(t){console.log(`每页 ${t} 条`),this.pageSize=t},handleCurrentChange(t){console.log(`当前页: ${t}`),this.currentPage=t},getAllBooksData(){this.request.get("/FrontBooks/bookself",{params:{userid:this.user.id,operator:"isuploader",pageNum:this.currentPage,pageSize:this.rowCount*this.rowCount}}).then((t=>{this.booksData=t.data,console.log(this.booksData),this.dataload=!0}))}}},s=i,l=o(3736),c=(0,l.Z)(s,a,n,!1,null,"0b8a09ea",null),u=c.exports}}]);
//# sourceMappingURL=577.acfcdb17.js.map