"use strict";(self["webpackChunkfrontdesk"]=self["webpackChunkfrontdesk"]||[]).push([[647],{5647:function(t,e,o){o.r(e),o.d(e,{default:function(){return c}});var l=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{margin:"10px 0"}},[e("div",{staticStyle:{margin:"10px 0"}},[e("el-popconfirm",{staticClass:"ml-5",attrs:{"confirm-button-text":"确定","cancel-button-text":"我再想想",icon:"el-icon-info","icon-color":"red",title:"您确定批量删除这些数据吗？"},on:{confirm:t.delBatch}},[e("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v("批量删除"),e("i",{staticClass:"el-icon-remove-outline"})])],1)],1),e("el-table",{attrs:{data:t.tableData,border:"",stripe:"",size:"medium"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection"}}),t._v(" "),e("el-table-column",{attrs:{label:"ID"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.idArray[e.$index]))]}}])}),e("el-table-column",{attrs:{prop:"productName",label:"商品名称"}}),e("el-table-column",{attrs:{prop:"price",label:"商品单价"}}),e("el-table-column",{attrs:{prop:"num",label:"商品数量"}}),e("el-table-column",{attrs:{prop:"image",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.image,"preview-src-list":[t.row.image]}})]}}])}),e("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-popconfirm",{staticClass:"ml-5",attrs:{"confirm-button-text":"确定","cancel-button-text":"我再想想",icon:"el-icon-info","icon-color":"red",title:"您确定删除吗？"},on:{confirm:function(e){return t.del(o.row.id)}}},[e("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v("删除 "),e("i",{staticClass:"el-icon-remove-outline"})])],1)]}}])})],1),e("div",{staticStyle:{padding:"10px 20px","background-color":"white",margin:"10px 0","text-align":"right","border-radius":"10px"}},[e("div",{staticStyle:{color:"red"}},[t._v("总价 ￥"+t._s(t.totalPrice))]),e("div",{staticStyle:{margin:"10px 0"}},[e("el-button",{staticStyle:{"background-color":"red",color:"white","font-size":"18px",padding:"10px 20px"},on:{click:t.openDialog}},[t._v("下单")])],1)]),e("el-dialog",{attrs:{title:"收货信息",visible:t.dialogFormVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{"label-width":"80px",size:"medium"}},[e("el-form-item",{attrs:{prop:"contactName",label:"收货人"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.contactName,callback:function(e){t.$set(t.form,"contactName",e)},expression:"form.contactName"}})],1),e("el-form-item",{attrs:{prop:"contactPhoneNo",label:"手机号码"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.contactPhoneNo,callback:function(e){t.$set(t.form,"contactPhoneNo",e)},expression:"form.contactPhoneNo"}})],1),e("el-form-item",{attrs:{prop:"contactAddress",label:"收货地址"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.contactAddress,callback:function(e){t.$set(t.form,"contactAddress",e)},expression:"form.contactAddress"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.adaOrder}},[t._v("确 定")])],1)],1)],1)},a=[],r={name:"Cart",data(){return{tableData:[],idArray:[],dialogFormVisible:!1,multipleSelection:[],user:localStorage.getItem("loguserinfo")?JSON.parse(localStorage.getItem("loguserinfo")):{},totalPrice:0,form:{contactName:"",contactPhoneNo:"",contactAddress:""}}},created(){this.load()},methods:{openDialog(){this.dialogFormVisible=!0},adaOrder(){this.multipleSelection.length?this.request.post("/orders/addOrder",this.multipleSelection,{params:this.form}).then((t=>{t?(this.$message.success("下单成功"),this.dialogFormVisible=!1,this.load()):this.$message.error("下单失败")})):this.$message.error("下单失败，未选择商品")},del(t){this.request.delete("/cart/"+t).then((t=>{t?(this.$message.success("删除成功"),this.dialogFormVisible=!1,this.load()):this.$message.error("删除失败")}))},delBatch(){let t=this.multipleSelection.map((t=>t.id));this.request.post("/cart/del/batch",t).then((t=>{t?(this.$message.success("批量删除成功"),this.dialogFormVisible=!1,this.load()):this.$message.error("批量删除失败")}))},handleSelectionChange(t){this.multipleSelection=t,this.request.post("/cart/cal",t).then((t=>{this.totalPrice=t.data}))},async load(){await this.request.get("/cart/personCart/"+this.user.id).then((t=>{this.tableData=t.data.list,console.log(this.user)})),this.idArray=Array.from({length:this.tableData.length},((t,e)=>e+1))}}},i=r,s=o(1001),n=(0,s.Z)(i,l,a,!1,null,"d4bf3b74",null),c=n.exports}}]);
//# sourceMappingURL=647.c3105460.js.map